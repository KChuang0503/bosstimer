<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss 重生計時器</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
</head>

<body>
    <div class="container">
        <h1>Boss 重生計時器</h1>

        <div class="main-layout">
            <!-- 左側：Boss 計時器控制面板 -->
            <div class="timer-panel">
                <div class="boss-selector">
                    <div class="chapter-selector">
                        <label for="chapter">選擇章節：</label>
                        <select id="chapter">
                            <option value="7">第七章</option>
                            <option value="8">第八章</option>
                            <option value="9">第九章</option>
                            <option value="10">第十章</option>
                        </select>
                    </div>

                    <div class="boss-selector">
                        <label for="boss">選擇地圖：</label>
                        <select id="boss">
                            <option value="7-1">扎卡里耶爾交叉路</option>
                            <option value="7-2">王陵一層</option>
                            <option value="7-3">王陵二層</option>
                            <option value="7-4">王陵三層</option>
                        </select>
                    </div>

                    <div class="server-selector">
                        <label for="server">選擇分流：</label>
                        <select id="server">
                            <option value="1">分流 1</option>
                            <option value="2">分流 2</option>
                            <option value="3">分流 3</option>
                            <option value="4">分流 4</option>
                            <option value="5">分流 5</option>
                            <option value="6">分流 6</option>
                            <option value="7">分流 7</option>
                            <option value="8">分流 8</option>
                            <option value="9">分流 9</option>
                        </select>
                    </div>
                </div>

                <div class="timer-setup">
                    <div class="input-group">
                        <label for="hours">小時</label>
                        <input type="number" id="hours" min="0" max="23" value="0" placeholder="0">
                    </div>

                    <div class="input-group">
                        <label for="minutes">分鐘</label>
                        <input type="number" id="minutes" min="0" max="59" value="0" placeholder="0">
                    </div>

                    <div class="input-group">
                        <label for="seconds">秒數</label>
                        <input type="number" id="seconds" min="0" max="59" value="0" placeholder="0">
                    </div>
                </div>

                <div class="controls">
                    <button id="addTimerBtn" class="btn btn-add">新增計時器</button>
                    <button id="resetBtn" class="btn btn-reset">重置</button>
                </div>

                <div class="share-section">
                    <h4>分享計時器</h4>
                    <div class="share-controls">
                        <button id="shareBtn" class="btn btn-share">🔗 生成分享連結</button>
                        <button id="importBtn" class="btn btn-import">📥 匯入分享連結</button>
                    </div>
                    <div class="sync-status" id="syncStatus" style="display: none;">
                        <div class="sync-indicator">
                            <span class="sync-icon">🔄</span>
                            <span class="sync-text">同步中...</span>
                        </div>
                        <div class="sync-info">
                            <span id="syncRole">主機</span> | 房間: <span id="roomId">-</span>
                        </div>
                    </div>
                </div>

                <div class="notification-controls">
                    <div class="volume-control">
                        <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
                        <span id="volumeValue">50%</span>
                    </div>
                    <div class="mute-control">
                        <button id="muteBtn" class="btn btn-mute">🔊</button>
                    </div>
                </div>

                <div class="status" id="status">選擇地圖並設定重生時間</div>
            </div>

            <!-- 右側：進行中的計時器列表 -->
            <div class="active-timers">
                <h3>進行中的計時器</h3>
                <div class="timers-list" id="timersList"></div>
            </div>
        </div>
    </div>

    <!-- Lightbox 彈出視窗 -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <div class="lightbox-header">
                <h3 id="lightboxTitle">分享計時器</h3>
                <button id="closeLightbox" class="btn-close">&times;</button>
            </div>
            <div class="lightbox-body">
                <!-- 分享連結內容 -->
                <div id="shareContent" class="lightbox-section" style="display: none;">
                    <label for="shareUrl">分享連結：</label>
                    <div class="url-input-group">
                        <input type="text" id="shareUrl" readonly>
                        <button id="copyBtn" class="btn btn-copy">複製</button>
                    </div>
                    <div class="share-info">
                        <p>將此連結分享給朋友，他們可以載入您的計時器設定</p>
                    </div>
                </div>
                
                <!-- 匯入連結內容 -->
                <div id="importContent" class="lightbox-section" style="display: none;">
                    <label for="importUrl">貼上分享連結：</label>
                    <div class="url-input-group">
                        <input type="text" id="importUrl" placeholder="貼上分享連結...">
                        <button id="pasteBtn" class="btn btn-paste">📋 貼上</button>
                        <button id="loadBtn" class="btn btn-load">載入</button>
                    </div>
                    <div class="import-info">
                        <p>貼上朋友分享的連結來載入他們的計時器設定，或直接點擊載入從剪貼板讀取</p>
                    </div>
                </div>
            </div>
            <div class="lightbox-footer">
                <button id="cancelBtn" class="btn btn-cancel">取消</button>
            </div>
        </div>
    </div>

    <!-- Firebase 配置 -->
    <script src="firebase-config.js"></script>
    <script>
        // 檢查是否載入了 Firebase 配置
        if (typeof window.firebaseConfig === 'undefined') {
            console.error('Firebase 配置文件未找到！請確保 firebase-config.js 文件存在。');
            document.body.innerHTML = '<div style="text-align: center; padding: 50px; color: red;"><h1>配置錯誤</h1><p>請先設置 Firebase 配置文件</p><p>複製 firebase-config.example.js 為 firebase-config.js 並填入您的配置</p></div>';
        } else {
            // 初始化 Firebase
            firebase.initializeApp(window.firebaseConfig);
            
            // 獲取 Firebase 服務
            const database = firebase.database();
            const auth = firebase.auth();
        }
    </script>
    
    <script src="script.js"></script>
    
</body>

</html>